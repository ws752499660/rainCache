# RainCache/雨缓存

本项目是为解决[springRain](https://github.com/ws752499660/springRain)农机区块链项目中，承载农机上链业务服务端程序无法及时处理大量并发请求的问题。

通过实现**简洁，高效，易实现**的分布式缓存，缓解大量并发时对承载上链业务的服务器和背后联盟内区块链网络的压力。

雨缓存支持以下特性：

* 基于LRU的缓存淘汰机制



## 缓存淘汰机制

### 思路

缓存淘汰有多重机制，较为常见的有FIFO，时钟方法，LRU和随机方法。

在redis中，使用了一种近似LRU算法。默认情况下，Redis会随机挑选5个键，并从中选择一个最久未使用的key进行淘汰。

**因此，考虑性能与简洁，我们使用标准的LRU算法作为缓存淘汰算法。**

我们设定缓存的元素为键值对<k,v>。

对于LRU而言，我们要维护一个队列，该队列是缓存中所有的元素的集合。

每当有一个新的元素要进入缓存时，若队列未满则进入队尾；若已满，则从队首出队一个元素，再使新元素入队。

若有一个队内元素被使用了，需要将其移动到队尾。

以此，队首便永远是最近最少访问的元素（优先出队/淘汰）。

## 缓存实现

path: ./lru

### 数据结构

有思路可以知道，我们需要一个字典（map）来存储键值对，也需要一个队列来用于LRU的实现。

所以我们在cache中设置一个字典和一个双向链表。

### 方法

* 构造like函数（简单工厂）
* 向缓存中添加/修改元素
* 从缓存中获取key对应的value
* 缓存淘汰
* 返回当前缓存中有多少元素